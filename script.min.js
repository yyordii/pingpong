class GameObject{constructor(t,i,e,s,h,n){this.x=t,this.y=i,this.width=e,this.height=s,this.speed=h,this.color=n}aiFollow(t){t.y<this.y?this.moveUp():t.y>this.y+this.height&&this.moveDown()}bounceOffObject(t){this.x+this.radius>t.x&&this.x-this.radius<t.x+t.width&&this.y+this.radius>t.y&&this.y-this.radius<t.y+t.height&&(t=(this.y-t.y)/t.height,this.speedX=-this.speedX,this.speedY=2*(t-.5)*this.speed)}draw(t){t.fillStyle=this.color,t.fillRect(this.x,this.y,this.width,this.height)}moveLeft(){this.x-=this.speed}moveRight(){this.x+=this.speed}moveUp(){0<=this.y-this.speed&&(this.y-=this.speed)}moveDown(){this.y+this.height+this.speed<=window.innerHeight&&(this.y+=this.speed)}keepWithinScreen(){this.x+this.width>window.innerWidth&&(this.x=window.innerWidth-this.width),this.x<0&&(this.x=0),this.y+this.height>window.innerHeight&&(this.y=window.innerHeight-this.height),this.y<0&&(this.y=0)}}class Ball extends GameObject{constructor(t,i,e,s){var h=6*(Math.random()<.5?-1:1),n=6*(Math.random()<.5?-1:1);super(t,i,2*e,2*e,6,s),this.radius=e,this.speedX=h,this.speedY=n}draw(t){t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill()}move(){this.x+=this.speedX,this.y+=this.speedY}bounceOffWalls(){this.y+this.radius>window.innerHeight?(this.speedY=-Math.abs(this.speedY),this.y=window.innerHeight-this.radius):this.y-this.radius<0&&(this.speedY=Math.abs(this.speedY),this.y=this.radius)}resetIfHitsWall(){return this.x+this.radius>window.innerWidth?(this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.speedX=-Math.abs(this.speed),this.speedY=(Math.random()<.5?-1:1)*this.speed,"black"):this.x-this.radius<0&&(this.x=window.innerWidth/2,this.y=window.innerHeight/2,this.speedX=Math.abs(this.speed),this.speedY=(Math.random()<.5?-1:1)*this.speed,"red")}}class Game{constructor(){var t=130;this.mode="ai",this.gamePaused=!0,this.timerInterval=null,this.obj1=new GameObject(100,window.innerHeight/2-65,10,t,5,"blue"),this.obj2=new GameObject(window.innerWidth-10-100,window.innerHeight/2-65,10,t,5,"red"),this.ball=new Ball(window.innerWidth/2,window.innerHeight/2,10,"white"),this.keys={},this.gamePaused=!0,this.scoreBlack=0,this.scoreRed=0,this.timer=90}draw(){var t,i=document.getElementById("canvas");i.getContext&&((t=i.getContext("2d")).clearRect(0,0,i.width,i.height),this.obj1.draw(t),this.obj2.draw(t),this.ball.draw(t))}resetPositions(){this.obj1.x=100,this.obj1.y=window.innerHeight/2-65,this.obj2.x=window.innerWidth-10-100,this.obj2.y=window.innerHeight/2-65,this.ball.x=window.innerWidth/2,this.ball.y=window.innerHeight/2,this.ball.speedX=-Math.abs(this.ball.speed),this.ball.speedY=(Math.random()<.5?-1:1)*this.ball.speed}update(){this.keys.w&&this.obj1.moveUp(),this.keys.s&&this.obj1.moveDown(),"ai"===this.mode?this.obj2.aiFollow(this.ball):"duo"===this.mode&&(this.keys.ArrowUp&&this.obj2.moveUp(),this.keys.ArrowDown)&&this.obj2.moveDown(),this.obj2.aiFollow(this.ball),this.obj1.keepWithinScreen(),this.obj2.keepWithinScreen(),this.gamePaused||this.ball.move(),this.ball.bounceOffWalls(),this.ball.bounceOffObject(this.obj1),this.ball.bounceOffObject(this.obj2);var t=this.ball.resetIfHitsWall();t&&(this.gamePaused=!0,this.pauseTimer(),"black"===t?(this.scoreBlack++,document.getElementById("score-black").textContent=this.scoreBlack):"red"===t&&(this.scoreRed++,document.getElementById("score-red").textContent=this.scoreRed),this.resetPositions())}gameLoop(){this.update(),this.draw(),window.requestAnimationFrame(this.gameLoop.bind(this))}adjustCanvasSize(){var t=document.getElementById("canvas");t.width=window.innerWidth,t.height=window.innerHeight}start(){this.adjustCanvasSize(),window.addEventListener("resize",()=>{this.adjustCanvasSize()}),this.gameLoop(),window.addEventListener("keydown",t=>{this.keys[t.key]=!0," "===t.key&&(this.gamePaused=!this.gamePaused,this.gamePaused?this.pauseTimer():this.startTimer()),["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"].includes(t.key)&&t.preventDefault()}),window.addEventListener("keyup",t=>{this.keys[t.key]=!1})}startTimer(){if(!this.timerInterval){const i=document.getElementById("timer");this.timerInterval=setInterval(()=>{var t;this.timer--,i.textContent=this.timer,0===this.timer&&(clearInterval(this.timerInterval),t=this.scoreBlack>this.scoreRed?"Black":"Red",alert("Time's up! The winner is "+t))},1e3)}}pauseTimer(){clearInterval(this.timerInterval),this.timerInterval=null}}(new Game).start();